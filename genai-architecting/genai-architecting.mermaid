flowchart TD
  subgraph LanguagePortal[Language Portal for Learning Japanese]
    Teacher
    Student
  end

  subgraph GenAI[Generative AI]
    WritingApp[Writing Practicing App]
    TextAdventure[Text Adventure Immersion Game]
    VisualNovel[Light Visual Novel Immersion Reading]
    SentenceConstructor[Sentence Constructor]
    Flashcard[Visual Flashcard Vocab]
    SpeakToLearn[Speak to Learn]
  end

  subgraph Database[Japanese Language Database]
    Words2000[Basic 2000 Japanese Words]
    VectorDB[Vector Database - PostgreSQL]
    RedisCache[Redis Cache]
    RAG[Retrieval-Augmented Generation System]
  end

  subgraph AuthLayer[Authentication Layer]
    Clerk[Clerk Authentication]
  end

  subgraph Payment[Payment Processing]
    Stripe[Stripe]
  end

  Teacher & Student -->|Interact with| GenAI
  GenAI -->|Uses| Database
  GenAI -->|Requires Auth| AuthLayer
  GenAI -->|Requires Payment| Payment
  GenAI -->|Queries| RAG
  RAG -->|Checks Cache| RedisCache
  RAG -->|Decides if Data Request Needed| VectorDB & Words2000

  WritingApp -->|Accesses| Words2000
  WritingApp -->|Uses| VectorDB
  TextAdventure -->|Uses| Words2000
  TextAdventure -->|Uses| VectorDB
  VisualNovel -->|Uses| Words2000
  VisualNovel -->|Uses| VectorDB
  SentenceConstructor -->|Uses| Words2000
  SentenceConstructor -->|Uses| VectorDB
  Flashcard -->|Uses| Words2000
  Flashcard -->|Uses| VectorDB
  SpeakToLearn -->|Uses| Words2000
  SpeakToLearn -->|Uses| VectorDB